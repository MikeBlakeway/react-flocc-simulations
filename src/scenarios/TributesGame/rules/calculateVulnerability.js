import { utils } from 'flocc'
import { alliance } from '.'

const calculateVulnerability = (a, b, population) => {
    const withA = alliance(a, b, population)
    const withB = alliance(b, a, population)
    const withAWealth = utils.sum(withA.map((c) => c.get('wealth')))
    const withBWealth = utils.sum(withB.map((c) => c.get('wealth')))
    const vulnerability = (withBWealth - withAWealth) / withBWealth
    return vulnerability
}

export default calculateVulnerability
